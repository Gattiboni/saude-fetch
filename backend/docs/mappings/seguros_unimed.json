{
  "operator": "seguros_unimed",
  "steps": [
    {
      "action": "navigate",
      "target": "https://www.segurosunimed.com.br/planos/saude",
      "timeout_ms": 20000
    },
    {
      "action": "click",
      "selector": "#onetrust-accept-btn-handler, button:has-text('Aceitar')",
      "timeout_ms": 3000,
      "optional": true
    },
    {
      "action": "wait_for_timeout",
      "timeout_ms": 500
    },
    {
      "action": "type",
      "selector": "input#cpf",
      "timeout_ms": 10000
    },
    {
      "action": "keypress",
      "selector": "input#cpf",
      "key": "Enter",
      "timeout_ms": 10000
    },
    {
      "action": "wait_for",
      "selector": [
        "text=/benefici\u00e1rio n\u00e3o encontrado/i",
        "text=/selecione o benefici\u00e1rio/i",
        "div.error p",
        "div.plan-highlight p"
      ],
      "timeout_ms": 20000
    },
    {
      "action": "evaluate",
      "script": "(() => { const err = document.querySelector('div.error p'); if (err && err.innerText.toLowerCase().includes('n\u00e3o encontrado')) return 'negativo'; const ok = document.querySelector('div.plan-highlight p'); if (ok) return 'positivo'; return 'indefinido'; })()",
      "timeout_ms": 10000
    }
  ],
  "result_parsing": {
    "status_selectors": [
      "div.error p",
      "div.plan-highlight p"
    ],
    "negative_keywords": [
      "N\u00c3O ENCONTRADO"
    ],
    "status_timeout_ms": 20000,
    "plan_selectors": [
      "div.plan-highlight p"
    ],
    "plan_optional": true
  }
}
