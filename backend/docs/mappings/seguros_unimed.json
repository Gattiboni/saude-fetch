{
  "meta": { "provider": "seguros-unimed", "task": "cpf-eligibility", "version": "1.0.0" },
  "navigate": {
    "url": "https://www.segurosunimed.com.br/guia-medico/",
    "expand_recursively": true,
    "reuse_page": true
  },
  "inputs": {
    "cpf": { "selector": "input[placeholder='Informe o CPF ou número do cartão']", "type": "text", "mask": "cpf", "submit": "none", "clear": true }
  },
  "steps": [
    { "wait": { "ms": 3000 } },
    {
      "action": "navigate",
      "target": "https://www.segurosunimed.com.br/portal/guia-medico",
      "wait_for_any": [
        "input[placeholder*='cpf' i]",
        "input[name*='cpf' i]"
      ],
      "timeout_ms": 20000
    },
    {
      "action": "fill",
      "selector": "input[placeholder*='cpf' i]",
      "value": "{identifier}",
      "timeout_ms": 20000
    },
    {
      "action": "wait_for",
      "selector": [
        "text=/plano/i",
        "text=/não localizamos/i",
        ".s-text.s-text-secondary",
        ".s-input-feedback-invalid"
      ],
      "timeout_ms": 20000
    }
  ],
  "result_parsing": {
    "status_selectors": [
      "text=/plano/i",
      "text=/não localizamos/i",
      ".s-text.s-text-secondary",
      ".s-input-feedback-invalid"
    ],
    "status_timeout_ms": 20000,
    "status_poll_interval_ms": 300,
    "positive_keywords": [
      "PLANO",
      "UNIMED",
      "PME",
      "COMPACTO",
      "EMPRESA",
      "COOPERADO",
      "ATIVO"
    ],
    "negative_keywords": [
      "NÃO LOCALIZAMOS",
      "CPF INFORMADO",
      "INVÁLIDO",
      "SEM PLANO"
    ],
    "error_keywords": [
      "ERRO",
      "INVÁLIDO",
      "NÃO LOCALIZAMOS"
    ],
    "plan_selectors": [
      ".s-text.s-text-secondary",
      ".s-input-feedback-invalid"
    ],
    "plan_optional": true
  },
  "notes": "A validação ocorre automaticamente após o preenchimento. Seletores tolerantes cobrem variações de mensagens de sucesso ou erro."
}
