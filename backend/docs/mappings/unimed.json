{
  "meta": { "provider": "unimed", "task": "cpf-eligibility", "version": "1.0.0" },
  "navigate": {
    "url": "https://www.unimed.coop.br/site/guia-medico#/",
    "expand_recursively": true,
    "reuse_page": true,
    "geolocation": "allow_if_asked"
  },
  "inputs": {
    "cpf": { "selector": "#client-input", "type": "text", "mask": "cpf", "submit": "none", "clear": true }
  },
  "steps": [
    {
      "action": "navigate",
      "target": "https://www.unimed.coop.br/site/guia-medico#/",
      "wait_for_any": [
        "#client-input",
        "input[name*='cpf' i]",
        "input[placeholder*='cpf' i]"
      ],
      "timeout_ms": 20000
    },
    {
      "action": "fill",
      "selector": "#client-input",
      "value": "{identifier}",
      "timeout_ms": 20000
    },
    {
      "action": "wait_for",
      "selector": [
        "text=/UNIMED/i",
        "#NameIdenticadedUser",
        ".ClientInputWithLabel--text"
      ],
      "timeout_ms": 20000
    }
  ],
  "result_parsing": {
    "status_selectors": [
      "text=/UNIMED/i",
      "#NameIdenticadedUser",
      ".ClientInputWithLabel--text"
    ],
    "status_timeout_ms": 20000,
    "status_poll_interval_ms": 300,
    "positive_keywords": [
      "UNIMED",
      "PLANO",
      "COOPERADO",
      "BENEFICIÁRIO",
      "ATIVO"
    ],
    "negative_keywords": [
      "É CLIENTE? DIGITE SEU CPF OU CARTEIRINHA",
      "INVÁLIDO",
      "NÃO ENCONTRADO"
    ],
    "error_keywords": [
      "ERRO",
      "INVÁLIDO",
      "NÃO ENCONTRADO"
    ]
  },
  "notes": "O preenchimento do CPF dispara automaticamente a verificação. O driver inclui heurísticas adicionais para procurar rótulos UNIMED visíveis próximos ao campo."
}
